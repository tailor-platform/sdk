const __executor_function=async({newRecord:c,client:t})=>{const e=await t.execOne(`select * from User where id = '${c.id}'`);console.log(`New user created: ${e.name} (${e.email})`)},$connect_tailordb=async c=>{const t=new tailordb.Client({namespace:c});await t.connect();const e={async exec(a){return(await t.queryObject(a)).rows},async execOne(a){return(await t.queryObject(a)).rows[0]}};return{...e,async transaction(a){try{await e.exec("BEGIN");const n=await a(e);return await e.exec("COMMIT"),n}catch(n){console.error("Transaction failed:",n);try{await e.exec("ROLLBACK")}catch(r){console.error("Failed to rollback transaction:",r)}}}}},$tailor_db_wrapper=async(c,t)=>{const e=await $connect_tailordb(c);return async a=>await t({...a,db:e,client:e})};globalThis.main=await $tailor_db_wrapper("tailordb",__executor_function);
//# sourceMappingURL=user-created.js.map
