const e=async({newRecord:e,client:t})=>{let n=await t.execOne(`select * from User where id = '${e.id}'`);console.log(`New user created: ${n.name} (${n.email})`)},t=async e=>{let t=new tailordb.Client({namespace:e});e&&await t.connect();let n={async exec(e){let n=await t.queryObject(e);return n.rows},async execOne(e){let n=await t.queryObject(e);return n.rows[0]}};return{...n,async transaction(e){try{await n.exec(`BEGIN`);let t=await e(n);return await n.exec(`COMMIT`),t}catch(e){console.error(`Transaction failed:`,e);try{await n.exec(`ROLLBACK`)}catch(e){console.error(`Failed to rollback transaction:`,e)}}}}},n=async(e,n)=>{let r=await t(e);return async e=>await n({...e,db:r,client:r})};globalThis.main=await n(`tailordb`,e);
//# sourceMappingURL=user-created.js.map