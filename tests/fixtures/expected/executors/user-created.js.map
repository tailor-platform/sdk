{"version":3,"file":"user-created.js","names":["e"],"sources":["user-created.transformed.js","../executor_steps/user-created.js"],"sourcesContent":["import { user } from \"src/tailordb/user\";\n\n//#region src/executors/userCreated.ts\n\n//#endregion\n\n// Export the executor function\nexport const __executor_function = async({newRecord,client})=>{const record=await client.execOne(`select * from User where id = '${newRecord.id}'`);console.log(`New user created: ${record.name} (${record.email})`)};","import { __executor_function } from \"../executors/user-created.transformed.js\";\n\nconst $connect_tailordb = async (namespace) => {\n  const baseClient = new tailordb.Client({ namespace });\n  if (namespace) {\n    await baseClient.connect();\n  }\n  const client = {\n    async exec(query) {\n      const result = await baseClient.queryObject(query);\n      return result.rows;\n    },\n    async execOne(query) {\n      const result = await baseClient.queryObject(query);\n      return result.rows[0];\n    },\n  };\n  return {\n    ...client,\n    async transaction(callback) {\n      try {\n        await client.exec(\"BEGIN\");\n        const result = await callback(client);\n        await client.exec(\"COMMIT\");\n        return result;\n      } catch (e) {\n        console.error(\"Transaction failed:\", e);\n        try {\n          await client.exec(\"ROLLBACK\");\n        } catch (e) {\n          console.error(\"Failed to rollback transaction:\", e);\n        }\n      }\n    }\n  };\n};\n\nconst $tailor_db_wrapper = async (namespace, fn) => {\n  const client = await $connect_tailordb(namespace);\n  return async (args) => await fn({ ...args, db: client, client });\n};\nglobalThis.main = await $tailor_db_wrapper(\"tailordb\", __executor_function);"],"mappings":"AAOA,MAAa,EAAsB,MAAM,CAAC,YAAU,SAAO,GAAG,CAAC,IAAM,EAAO,KAAM,GAAO,SAAS,iCAAiC,EAAU,GAAG,GAAG,CAAC,QAAQ,KAAK,oBAAoB,EAAO,KAAK,IAAI,EAAO,MAAM,GAAG,AAAC,ECLhN,EAAoB,MAAO,GAAc,CAC7C,IAAM,EAAa,IAAI,SAAS,OAAO,CAAE,WAAW,GACpD,AAAI,GACF,KAAM,GAAW,SAAS,CAE5B,IAAM,EAAS,CACb,MAAM,KAAK,EAAO,CAChB,IAAM,EAAS,KAAM,GAAW,YAAY,EAAM,CAClD,OAAO,EAAO,IACf,EACD,MAAM,QAAQ,EAAO,CACnB,IAAM,EAAS,KAAM,GAAW,YAAY,EAAM,CAClD,OAAO,EAAO,KAAK,EACpB,CACF,EACD,MAAO,CACL,GAAG,EACH,MAAM,YAAY,EAAU,CAC1B,GAAI,CACF,KAAM,GAAO,KAAK,QAAQ,CAC1B,IAAM,EAAS,KAAM,GAAS,EAAO,CAErC,OADA,KAAM,GAAO,KAAK,SAAS,CACpB,CACR,OAAQ,EAAG,CACV,QAAQ,MAAM,sBAAuB,EAAE,CACvC,GAAI,CACF,KAAM,GAAO,KAAK,WAAW,AAC9B,OAAQA,EAAG,CACV,QAAQ,MAAM,kCAAmCA,EAAE,AACpD,CACF,CACF,CACF,CACF,EAEK,EAAqB,MAAO,EAAW,IAAO,CAClD,IAAM,EAAS,KAAM,GAAkB,EAAU,CACjD,OAAO,MAAO,GAAS,KAAM,GAAG,CAAE,GAAG,EAAM,GAAI,EAAQ,QAAQ,EAAC,AACjE,EACD,WAAW,KAAO,KAAM,GAAmB,WAAY,EAAoB"}