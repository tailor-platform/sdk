const $tailor_resolver_step__sqlStep=async n=>(await n.client.execOne("SELECT name FROM User")).name,$connect_tailordb=async n=>{const a=new tailordb.Client({namespace:n});await a.connect();const t={async exec(e){return(await a.queryObject(e)).rows},async execOne(e){return(await a.queryObject(e)).rows[0]}};return{...t,async transaction(e){try{await t.exec("BEGIN");const r=await e(t);return await t.exec("COMMIT"),r}catch(r){console.error("Transaction failed:",r);try{await t.exec("ROLLBACK")}catch(c){console.error("Failed to rollback transaction:",c)}}}}},$tailor_db_wrapper=async(n,a)=>{const t=await $connect_tailordb(n);return async e=>await a({...e,db:t,client:t})};globalThis.main=await $tailor_db_wrapper("tailordb",$tailor_resolver_step__sqlStep);
//# sourceMappingURL=stepChain__sqlStep.js.map
